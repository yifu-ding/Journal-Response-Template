\begin{algorithm}[H]
    \begin{addedenv}
    \caption{Reservoir Sampling (Generated by AI)}
    \label{algo:reservoir}
    \begin{algorithmic}[1]
      \Require Stream of items $x_1, x_2, \ldots$ (length unknown), reservoir size $m$
      \Ensure A uniform random sample $R$ of size $m$ from the stream
      \State Initialize empty reservoir $R$
      \For{$t \gets 1$ \textbf{to} $m$}
        \State $R_t \gets x_t$ \Comment{Fill the reservoir with the first $m$ items}
      \EndFor
      \State $t \gets m$
      \While{next item $x$ arrives}
        \State $t \gets t + 1$
        \State Draw $j \sim \mathrm{Uniform}\{1,2,\ldots,t\}$
        \If{$j \le m$}
          \State $R_j \gets x$ \Comment{Replace item $j$ with probability $m/t$}
        \EndIf
      \EndWhile
      \State \Return $R$
    \end{algorithmic}
    \end{addedenv}
  \end{algorithm}
  